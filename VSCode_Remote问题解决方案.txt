================================================================================
        VSCode Remote-SSH Copilot æ— æ³•ä½¿ç”¨é—®é¢˜ - è¯Šæ–­ä¸è§£å†³æ–¹æ¡ˆ
================================================================================

ğŸ“… æ—¥æœŸ: 2025å¹´10æœˆ16æ—¥
ğŸ‘¤ ç”¨æˆ·: xcr
ğŸ”§ é—®é¢˜: VSCode Remote-SSH åªèƒ½è¿è¡Œç²¾ç®€ç‰ˆ CLI Serverï¼Œæ— æ³•ä½¿ç”¨ Copilot ç­‰æ‰©å±•

================================================================================
ä¸€ã€é—®é¢˜åˆ†æ
================================================================================

âŒ é”™è¯¯ä¿¡æ¯:
   "å½“å‰è¿œç¨‹ç«¯å£è¿è¡Œçš„æ˜¯ VS Code çš„ç²¾ç®€ç‰ˆ CLI Serverï¼Œåªæ”¯æŒ"çº¯æ–‡æœ¬ç¼–è¾‘å™¨ + ç»ˆç«¯"
    çš„åŠŸèƒ½ï¼Œä¸æ”¯æŒ Copilot Chatã€Pythonã€Jupyterç­‰æ‰©å±•ã€‚"

ğŸ” æ ¹æœ¬åŸå› :
   **ç£ç›˜ç©ºé—´ä¸è¶³ï¼**

   æœåŠ¡å™¨ç£ç›˜ä½¿ç”¨æƒ…å†µ:
   - æ–‡ä»¶ç³»ç»Ÿ: /dev/nvme1n1p2
   - æ€»å®¹é‡: 879GB
   - å·²ä½¿ç”¨: 830GB (100%)
   - å¯ç”¨ç©ºé—´: ä»… 4.4GB
   - æŒ‚è½½ç‚¹: /

ğŸ“¦ VSCode Server éœ€æ±‚:
   - å®Œæ•´çš„ VSCode Server éœ€è¦ä¸‹è½½å’Œè§£å‹ 300-500MB çš„æ–‡ä»¶
   - æ‰©å±•ï¼ˆCopilotã€Pythonã€Jupyterç­‰ï¼‰ä¹Ÿéœ€è¦é¢å¤–ç©ºé—´
   - å½“ç£ç›˜ç©ºé—´ä¸è¶³æ—¶ï¼ŒVSCode åªèƒ½å¯åŠ¨ç²¾ç®€ç‰ˆ CLI Server

ğŸ—‚ï¸ ç£ç›˜å ç”¨åˆ†å¸ƒ:
   /home/admin/     802GB  âš ï¸ ä¸»è¦å ç”¨è€…ï¼
   /home/hft/        12GB
   /usr/              8.4GB
   /snap/             7.8GB
   /var/              5.4GB
   /home/xcr/       952KB

================================================================================
äºŒã€è§£å†³æ–¹æ¡ˆ
================================================================================

ã€æ–¹æ¡ˆ1: æ¸…ç†ç£ç›˜ç©ºé—´ã€‘ï¼ˆæ¨èï¼Œå½»åº•è§£å†³ï¼‰
------------------------------------------

ç›®æ ‡: è‡³å°‘é‡Šæ”¾ 5-10GB ç©ºé—´

1. æ¸…ç† /home/admin ç›®å½•ï¼ˆå ç”¨ 802GBï¼‰
   
   # æ£€æŸ¥ admin ç›®å½•å†…å®¹ï¼ˆéœ€è¦ root æƒé™ï¼‰
   sudo du -h --max-depth=1 /home/admin/ | sort -hr | head -20
   
   # æ ¹æ®æ£€æŸ¥ç»“æœï¼Œåˆ é™¤ä¸éœ€è¦çš„æ–‡ä»¶
   # å»ºè®®ä¼˜å…ˆæ¸…ç†ï¼š
   - æ—§çš„å¤‡ä»½æ–‡ä»¶
   - ä¸´æ—¶æ–‡ä»¶å’Œç¼“å­˜
   - ä¸å†ä½¿ç”¨çš„æ•°æ®æ–‡ä»¶
   - é‡å¤çš„æ–‡ä»¶

2. æ¸…ç†ç³»ç»Ÿç¼“å­˜å’Œæ—¥å¿—
   
   # æ¸…ç† apt ç¼“å­˜
   sudo apt clean
   sudo apt autoclean
   
   # æ¸…ç†æ—§çš„æ—¥å¿—æ–‡ä»¶
   sudo journalctl --vacuum-size=500M
   
   # æ¸…ç†æ—§çš„ snap ç‰ˆæœ¬
   sudo snap list --all | awk '/disabled/{print $1, $3}' | \
       while read snapname revision; do \
           sudo snap remove "$snapname" --revision="$revision"; \
       done

3. æ¸…ç† Dockerï¼ˆå¦‚æœå®‰è£…äº†ï¼‰
   
   # æ¸…ç†æœªä½¿ç”¨çš„å®¹å™¨ã€é•œåƒã€ç½‘ç»œ
   docker system prune -a --volumes

4. æ¸…ç†ç”¨æˆ·ç¼“å­˜
   
   # æ¸…ç† hft ç”¨æˆ·çš„ç¼“å­˜
   rm -rf ~/.cache/*
   
   # æ¸…ç† conda ç¼“å­˜ï¼ˆå¦‚æœæœ‰ï¼‰
   conda clean --all -y

5. æ£€æŸ¥å¹¶åˆ é™¤å¤§æ–‡ä»¶
   
   # æŸ¥æ‰¾å¤§äº 1GB çš„æ–‡ä»¶
   sudo find /home -type f -size +1G -exec ls -lh {} \; 2>/dev/null
   
   # æŸ¥æ‰¾å¤§äº 500MB çš„æ–‡ä»¶
   sudo find /home -type f -size +500M -exec ls -lh {} \; 2>/dev/null


ã€æ–¹æ¡ˆ2: ä¸º xcr ç”¨æˆ·é…ç½®ç‹¬ç«‹å·¥ä½œç›®å½•ã€‘ï¼ˆä¸´æ—¶æ–¹æ¡ˆï¼‰
------------------------------------------

å¦‚æœæ— æ³•æ¸…ç† /home/adminï¼Œå¯ä»¥å°† xcr çš„å·¥ä½œç›®å½•ç§»åˆ°å…¶ä»–åˆ†åŒºï¼š

1. æ£€æŸ¥æ˜¯å¦æœ‰å…¶ä»–åˆ†åŒºæœ‰è¶³å¤Ÿç©ºé—´
   
   df -h

2. åˆ›å»ºè½¯é“¾æ¥åˆ°æœ‰ç©ºé—´çš„åˆ†åŒº
   
   # å‡è®¾ /mnt/data æœ‰è¶³å¤Ÿç©ºé—´
   sudo mkdir -p /mnt/data/vscode-xcr
   sudo chown xcr:xcr /mnt/data/vscode-xcr
   
   # ç§»é™¤ç°æœ‰çš„ .vscode-server
   sudo rm -rf /home/xcr/.vscode-server
   
   # åˆ›å»ºè½¯é“¾æ¥
   sudo -u xcr ln -s /mnt/data/vscode-xcr /home/xcr/.vscode-server


ã€æ–¹æ¡ˆ3: å¢åŠ ç£ç›˜ç©ºé—´ã€‘ï¼ˆæ ¹æœ¬è§£å†³ï¼‰
------------------------------------------

1. æ£€æŸ¥æ˜¯å¦å¯ä»¥æ‰©å®¹ç°æœ‰åˆ†åŒº
   
   # æŸ¥çœ‹ç£ç›˜åˆ†åŒº
   sudo fdisk -l
   sudo lsblk

2. å¦‚æœæ˜¯è™šæ‹Ÿæœºï¼Œè”ç³»ç®¡ç†å‘˜æ‰©å®¹è™šæ‹Ÿç£ç›˜

3. å¦‚æœæ˜¯ç‰©ç†æœºï¼Œè€ƒè™‘ï¼š
   - æ·»åŠ æ–°ç¡¬ç›˜
   - æ›´æ¢æ›´å¤§å®¹é‡ç¡¬ç›˜
   - å°†éƒ¨åˆ†ç›®å½•ï¼ˆå¦‚ /home/adminï¼‰ç§»åŠ¨åˆ°æ–°ç£ç›˜


ã€æ–¹æ¡ˆ4: ä¸´æ—¶æ¸…ç†ç»™ xcr ä½¿ç”¨ã€‘ï¼ˆå¿«é€Ÿæ–¹æ¡ˆï¼‰
------------------------------------------

åªéœ€é‡Šæ”¾ 1-2GB å³å¯è®© VSCode Server æ­£å¸¸è¿è¡Œï¼š

1. æ¸…ç†ç³»ç»Ÿç¼“å­˜ï¼ˆæœ€å¿«ï¼‰
   
   sudo apt clean
   sudo journalctl --vacuum-size=200M

2. æ¸…ç† hft ç”¨æˆ·çš„ç¼“å­˜
   
   rm -rf ~/.cache/*

3. é‡å¯ VSCode Remote è¿æ¥


ã€æ–¹æ¡ˆ5: è”ç³» admin ç”¨æˆ·ã€‘
------------------------------------------

ç”±äº /home/admin å ç”¨äº† 802GBï¼ˆ91%ï¼‰ï¼Œéœ€è¦è”ç³»è¯¥ç”¨æˆ·ï¼š

1. æ£€æŸ¥æ˜¯å¦æœ‰ä¸éœ€è¦çš„æ•°æ®
2. å°†æ•°æ®ç§»åŠ¨åˆ°å¤–éƒ¨å­˜å‚¨
3. å‹ç¼©æˆ–å½’æ¡£æ—§æ•°æ®

================================================================================
ä¸‰ã€æ‰§è¡Œæ­¥éª¤ï¼ˆæ¨èæ–¹æ¡ˆ - å¿«é€Ÿæ¸…ç†ï¼‰
================================================================================

ä»¥ä¸‹æ˜¯å¿«é€Ÿé‡Šæ”¾ç©ºé—´çš„æ­¥éª¤ï¼Œä¸ä¼šå½±å“é‡è¦æ•°æ®ï¼š

æ­¥éª¤1: æ¸…ç†ç³»ç»Ÿç¼“å­˜
-------------------
sudo apt clean
sudo apt autoclean
sudo journalctl --vacuum-size=200M

é¢„è®¡é‡Šæ”¾: 500MB - 2GB

æ­¥éª¤2: æ¸…ç†æ—§çš„ snap ç‰ˆæœ¬
-------------------------
# åˆ—å‡ºæ‰€æœ‰ snap åŒ…
sudo snap list --all

# åˆ é™¤æ—§ç‰ˆæœ¬ï¼ˆä¿ç•™å½“å‰ç‰ˆæœ¬ï¼‰
sudo sh -c 'snap list --all | awk "/disabled/{print \$1, \$3}" | while read snapname revision; do snap remove "$snapname" --revision="$revision"; done'

é¢„è®¡é‡Šæ”¾: 1-3GB

æ­¥éª¤3: æ¸…ç†ç”¨æˆ·ç¼“å­˜
-------------------
# æ¸…ç† hft ç”¨æˆ·ç¼“å­˜
rm -rf ~/.cache/*

# æ¸…ç† xcr ç”¨æˆ·ç¼“å­˜
sudo rm -rf /home/xcr/.cache/*

é¢„è®¡é‡Šæ”¾: 300-500MB

æ­¥éª¤4: æ£€æŸ¥ç£ç›˜ç©ºé—´
-------------------
df -h /

ç›®æ ‡: è‡³å°‘æœ‰ 5GB å¯ç”¨ç©ºé—´

æ­¥éª¤5: é‡æ–°è¿æ¥ VSCode
----------------------
1. åœ¨æœ¬åœ° VSCode ä¸­æ–­å¼€ SSH è¿æ¥
2. åˆ é™¤æœ¬åœ°çš„è¿æ¥ç¼“å­˜ï¼š
   - Mac/Linux: rm -rf ~/.vscode/remote-ssh
   - Windows: åˆ é™¤ %USERPROFILE%\.vscode\remote-ssh
3. é‡æ–°è¿æ¥åˆ°æœåŠ¡å™¨
4. VSCode ä¼šè‡ªåŠ¨ä¸‹è½½å®Œæ•´çš„ Server ç»„ä»¶

================================================================================
å››ã€é¢„é˜²æªæ–½
================================================================================

1. è®¾ç½®ç£ç›˜ä½¿ç”¨ç›‘æ§
   
   # åˆ›å»ºç›‘æ§è„šæœ¬
   cat > ~/check_disk.sh << 'EOF'
#!/bin/bash
USAGE=$(df -h / | awk 'NR==2 {print $5}' | sed 's/%//')
if [ $USAGE -gt 90 ]; then
    echo "è­¦å‘Š: ç£ç›˜ä½¿ç”¨ç‡è¾¾åˆ° ${USAGE}%"
    df -h /
fi
EOF
   
   chmod +x ~/check_disk.sh
   
   # æ·»åŠ åˆ° crontabï¼ˆæ¯å¤©æ£€æŸ¥ï¼‰
   (crontab -l 2>/dev/null; echo "0 9 * * * ~/check_disk.sh") | crontab -

2. å®šæœŸæ¸…ç†
   
   # æ¯æœˆæ¸…ç†ä¸€æ¬¡ç¼“å­˜å’Œæ—¥å¿—
   sudo apt clean
   sudo journalctl --vacuum-time=30d
   rm -rf ~/.cache/*

3. é…ç½®æ—¥å¿—è½®è½¬
   
   # é™åˆ¶æ—¥å¿—å¤§å°
   sudo nano /etc/systemd/journald.conf
   # è®¾ç½®: SystemMaxUse=500M

4. ä½¿ç”¨é…é¢é™åˆ¶ç”¨æˆ·ç£ç›˜ä½¿ç”¨
   
   # å®‰è£… quota
   sudo apt install quota
   
   # ä¸ºç”¨æˆ·è®¾ç½®é…é¢ï¼ˆéœ€è¦é…ç½®ï¼‰

================================================================================
äº”ã€éªŒè¯è§£å†³æ–¹æ¡ˆ
================================================================================

æ¸…ç†å®Œæˆåï¼ŒéªŒè¯æ­¥éª¤ï¼š

1. æ£€æŸ¥ç£ç›˜ç©ºé—´
   df -h /
   
   ç¡®è®¤å¯ç”¨ç©ºé—´ > 5GB

2. æ£€æŸ¥ xcr ç”¨æˆ·æƒé™
   sudo -u xcr touch /home/xcr/test && sudo rm /home/xcr/test
   
   åº”è¯¥èƒ½æ­£å¸¸åˆ›å»ºå’Œåˆ é™¤æ–‡ä»¶

3. åˆ é™¤æ—§çš„ VSCode Server
   sudo rm -rf /home/xcr/.vscode-server/*

4. é‡æ–°è¿æ¥ VSCode
   - æ–­å¼€å½“å‰è¿æ¥
   - æ¸…ç†æœ¬åœ°ç¼“å­˜
   - é‡æ–°è¿æ¥

5. å®‰è£…æ‰©å±•æµ‹è¯•
   - åœ¨è¿œç¨‹ VSCode ä¸­å®‰è£… Python æˆ– Copilot æ‰©å±•
   - æ£€æŸ¥æ˜¯å¦èƒ½æ­£å¸¸ä½¿ç”¨

================================================================================
å…­ã€å¿«é€Ÿå‘½ä»¤å‚è€ƒ
================================================================================

# æ£€æŸ¥ç£ç›˜ä½¿ç”¨
df -h /

# æŸ¥çœ‹ç›®å½•å ç”¨ï¼ˆå‰20ï¼‰
sudo du -h --max-depth=1 /home/ | sort -hr | head -20

# æ¸…ç†ç³»ç»Ÿï¼ˆå®‰å…¨ï¼Œä¸ä¼šåˆ é™¤é‡è¦æ–‡ä»¶ï¼‰
sudo apt clean && sudo apt autoclean && sudo journalctl --vacuum-size=200M

# æŸ¥æ‰¾å¤§æ–‡ä»¶ï¼ˆå¤§äº 1GBï¼‰
sudo find /home -type f -size +1G -exec ls -lh {} \; 2>/dev/null

# åˆ é™¤ xcr çš„ VSCode Serverï¼ˆè®©å…¶é‡æ–°ä¸‹è½½ï¼‰
sudo rm -rf /home/xcr/.vscode-server

# æµ‹è¯• xcr ç”¨æˆ·å†™å…¥æƒé™
sudo -u xcr touch /home/xcr/test_write && sudo rm /home/xcr/test_write && echo "OK"

================================================================================
ä¸ƒã€è”ç³»ä¿¡æ¯
================================================================================

å¦‚éœ€å¸®åŠ©ï¼š
  - æœåŠ¡å™¨ç®¡ç†å‘˜: hft
  - Admin ç”¨æˆ·æ¸…ç†: è”ç³» admin ç”¨æˆ·æ¸…ç†å…¶ 802GB æ•°æ®

å…³é”®ä¿¡æ¯ï¼š
  - é—®é¢˜æ ¹æº: ç£ç›˜ 100% æ»¡
  - ä¸»è¦å ç”¨: /home/admin (802GB)
  - éœ€è¦ç©ºé—´: è‡³å°‘ 5GB
  - æ¨èæ¸…ç†: è§"ä¸‰ã€æ‰§è¡Œæ­¥éª¤"

================================================================================
                            é—®é¢˜å¯ä»¥è§£å†³ï¼
================================================================================

ğŸ’¡ æœ€å¿«è§£å†³æ–¹æ³•ï¼šæ‰§è¡Œ"ä¸‰ã€æ‰§è¡Œæ­¥éª¤"ä¸­çš„å‘½ä»¤ï¼Œé‡Šæ”¾ 2-5GB ç©ºé—´å³å¯ã€‚
